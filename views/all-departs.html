	<% include layout.html %>
	<div ng-app="myapp" ng-controller="searchAccount as search">
		<div  id="error"></div>
		<div id="seachResults">
			<table class="table table-bordered">
				<caption>Departments</caption>
				<thead>
					<tr>
						<th>Code</th>
						<th>Account Name</th>
						<th>Manager ID</th>
						<th>Action</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="x in departs">
						<td>
							{{x.Department_Code}}
						</td>
						<td>
							{{x.Department_Name}}
						</td>
						<td>
							{{x.Department_Manager_Employee_ID}}
						</td>
						<td>
							<a href="/viewAccount?id={{x.code}}">View</a>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	<% include partial/footer.html %>
	<script type="text/javascript">
		
		var app = angular.module('myapp', []);
		var myEl = angular.element( document.querySelector( '#error' ) );

		app.controller('searchAccount', function($scope, $http) {
			// $scope.IsVisible = false;
           
            	
            	$http({
		    		method:"GET",
		    		url:"/getDepartments"
				}).then(function(data){
					console.log(data.data);
					$scope.departs = data.data;
					myEl.html(data.data.message); 
				},function(error){
					
					myEl.html(data.data.message); 
				});
        });

	</script>
</body>
</html>

